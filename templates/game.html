<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div id="hero_params">

</div>
<div id="feed">
    <div class="news">{{message}}</div>
</div>
</body>
<script>
    function httpGetAsync(theUrl, callback)
{
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.onreadystatechange = function() {
        if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
            callback(xmlHttp.responseText);
    }
    xmlHttp.open("GET", theUrl, true); // true for asynchronous
    xmlHttp.send(null);
}

function response_handler(str_response) {
    let json_response = JSON.parse(str_response)
    console.log(json_response)
    let txt = json_response.message
    let feed = document.getElementById("feed");
    let news_div=document.createElement("div");
    news_div.classList.add("news");
    news_div.innerHTML=txt;
    let news_divs=document.getElementsByClassName('news');
    if (news_divs.length>5) {
        news_divs[0].remove();
    }
    feed.append(news_div)
    let hero = json_response.hero
    let hero_div=document.getElementById('hero_params');
    hero_div.innerHTML=`Здоровье: `+hero.hp;


}

setInterval(() => httpGetAsync('http://localhost:5000/api/update/1',response_handler),3000);

</script>
</html>